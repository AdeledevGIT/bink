<!DOCTYPE html>
<html>
<head>
    <link rel="icon" type="image/png" href="../logo1.png">
    <link rel="stylesheet" href="neonminimal.css">
    <style>
        /* Force avatar size for testing */
        .neonminimal-avatar {
            width: 120px !important;
            height: 120px !important;
            border: 3px solid #00ff88 !important;
        }
        .neonminimal-avatar-container {
            width: 120px !important;
            height: 120px !important;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    <style>body{margin:0;}</style>
    <script src="templates.js"></script>
</head>
<body>
    <div id="test-root"></div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Sample data to test the template
            const testData = {
                username: 'cyberpunk_dev',
                displayName: 'cyberpunk_dev',
                bio: 'Blockchain developer building the future of decentralized applications',
                profilePicUrl: 'https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=150&h=150&fit=crop&crop=face',
                socialLinks: {
                    twitter: '#',
                    github: '#',
                    linkedin: '#'
                },
                links: [
                    {
                        id: '1',
                        title: 'My DApp',
                        platform: 'website',
                        url: '#'
                    },
                    {
                        id: '2',
                        title: 'GitHub',
                        platform: 'github',
                        url: '#'
                    }
                ],
                media: {},
                catalog: []
            };

            // Initialize BINK templates namespace if not exists
            if (!window.BINK) {
                window.BINK = { templates: { templates: {} } };
            }

            // Add required helper functions for testing
            window.BINK.templates.shareProfile = function(event, username) {
                console.log('Share profile:', username);
            };

            window.BINK.templates.trackLinkClick = function(event, linkId) {
                console.log('Track link click:', linkId);
            };

            window.BINK.templates.shareLink = function(event, url, title) {
                console.log('Share link:', title, url);
            };

            window.BINK.templates.formatUsername = function(username) {
                return username || 'user';
            };

            window.BINK.templates.getPlatformIcon = function(platform) {
                const icons = {
                    'website': 'fas fa-globe',
                    'github': 'fab fa-github',
                    'twitter': 'fab fa-twitter',
                    'linkedin': 'fab fa-linkedin'
                };
                return icons[platform] || 'fas fa-link';
            };

            window.BINK.templates.renderCatalogContent = function(catalog) {
                return ''; // Empty for this test
            };

            window.BINK.templates.renderMediaContent = function(media) {
                return ''; // Empty for this test
            };

            window.BINK.templates.renderSocialLinks = function(socialLinks) {
                if (!socialLinks) return '';
                return Object.entries(socialLinks).map(([platform, url]) => `
                    <a href="${url}" target="_blank"><i class="${window.BINK.templates.getPlatformIcon(platform)}"></i></a>
                `).join('');
            };

            // Test the Neon Minimal template
            try {
                const neonMinimalTemplate = window.BINK.templates.templates['neonminimal'];
                if (neonMinimalTemplate) {
                    console.log('Neon Minimal template found, rendering...');
                    const rendered = neonMinimalTemplate.render(testData);
                    document.getElementById('test-root').innerHTML = rendered;
                    console.log('Neon Minimal template rendered successfully!');
                } else {
                    console.error('Neon Minimal template not found');
                    document.getElementById('test-root').innerHTML = '<div>Neon Minimal template not found</div>';
                }
            } catch (error) {
                console.error('Error rendering Neon Minimal template:', error);
                document.getElementById('test-root').innerHTML = '<div>Error: ' + error.message + '</div>';
            }
        });
    </script>
</body>
</html>
